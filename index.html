<!DOCTYPE html>
<html>

<head>
  <title>Deeplink Test</title>
  <script src="https://cdn.jsdelivr.net/npm/jwt-simple@0.5.6/build/jwt-simple.min.js"></script>
</head>

<body>

  <h1>Deeplink Test</h1>

  <button id="deeplinkButton">Open App</button>

  <script>
    const deeplinkButton = document.getElementById('deeplinkButton');

    deeplinkButton.addEventListener('click', () => {
      const deeplinkUrl = 'https://easyplayer:/'; // Replace with your app's deep link scheme
      const urlVideo = "https://dr-taha.s3.us-east-1.amazonaws.com/Week+4+E2.mp4/out.mpd";
      const studentId = "15";

      // Prepare data to be encrypted
      const payload = {
        url_video: urlVideo,
        student_id: studentId
      };

      // Define a secret key for encoding (replace with a secure key)
      const secretKey = "c2a3b59a81f5e2d9f2e5a31a5f7b2c1d4e5a81f2e9f3d4c3f7e2b1d4f5c3a9b2";

      // Generate the JWT token
      const token = jwt_encode(payload, secretKey);

      // Construct the deeplink with encrypted JWT data
      const encryptedDeeplinkUrl = `${deeplinkUrl}?token=${encodeURIComponent(token)}`;

      // Redirect to the deep link
      window.location.href = encryptedDeeplinkUrl;
    });
  </script>

</body>

</html>
